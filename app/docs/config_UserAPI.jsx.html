<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: config/UserAPI.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: config/UserAPI.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Funciones de la API de los usuarios
 *
 * @author UniCast
 *
 * @requires ../node_modules/swagger_unicast/dist/ApiClient.js:ApiClient
 * @requires ../node_modules/swagger_unicast/dist/api/UserApi.js:UserApi
 * @requires ./Auth.js:getUserToken
 */

import { ApiClient } from "swagger_unicast";
import UserApi from "swagger_unicast/dist/api/UserApi";
import { getUserToken } from "./Auth";

const apiInstance = new UserApi(); //Instancia de la API de usuarios
const defaultClient = ApiClient.instance;

/**
 * Inicia la sesión de un usuario
 * @param {String} username Nombre del usuario
 * @param {String} password Contraseña del usuario
 * @param {Function} callback Función a ejecutar tras obtener los daros
 */
export function authUser(username, password, callback) {
  apiInstance.authUser(username, password, (error, data, response) => {
    if (error) {
      callback(false);
    } else {
      callback(data);
    }
  });
}

/**
 * Crea el usuario especificado en el servidor
 * @param {String} username Nombre de usuario del nuevo usuario
 * @param {String} password Contraseña del nuevo usuario
 * @param {String} name Nombre del nuevo usuario
 * @param {String} surnames Apellidos del nuevo usuario
 * @param {String} email Email del nuevo usuario
 * @param {String} description Descripción del nuevo usuario
 * @param {Number} universityId ID de la universidad del nuevo usuario
 * @param {Number} degreeId ID del grado del nuevo usuario
 * @param {File} photo Foto de perfil del nuevo usuario
 * @param {Function} callback Función a ejecutar tras crear usuario
 */
export function addUser(
  username,
  password,
  name,
  surnames,
  email,
  description,
  universityId,
  degreeId,
  photo,
  callback
) {
  apiInstance.addUser(
    username,
    password,
    name,
    surnames,
    email,
    description,
    universityId,
    degreeId,
    photo,
    (error, data, response) => {
      if (error) {
        console.error(error);
      } else {
        callback(data);
      }
    }
  );
}

/**
 * Actualiza el usuario según los datos pasados como parámetros
 * @param {String} username Nuevo nombre de usuario
 * @param {String} password Nueva contraseña
 * @param {String} email Nuevo email
 * @param {String} description Nueva descripción
 * @param {String} name Nuevo nombre
 * @param {String} surnames Nuevos apellidos
 * @param {Number} universityId Nueva universidad
 * @param {Number} degreeId Nuevo grado
 * @param {File} photo Nueva foto de perfil
 * @param {Function} callback Función a ejecutar tras acutalizar el usuario
 */
export function updateUser(
  username,
  password,
  email,
  description,
  name,
  surnames,
  universityId,
  degreeId,
  photo,
  callback
) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();
  let opts = {
    username: username, // String | Nuevo nombre del usuario
    password: password, // String | Nueva contraseña del usuario
    email: email, // String | Nuevo email del usuario
    description: description, // String | Nueva descripción para el usuario
    name: name, // String | Nuevo nombre para el usuario
    surnames: surnames, // String | Nuevos apellidos para el usuario
    universityId: universityId, // Number | Nueva universidad del usuario
    degreeId: degreeId, // Number | Nueva carrera del usuario
    photo: photo // File | Nueva foto del usuario
  };

  if (photo === undefined) {
    delete opts.photo;
  }
  if (universityId === 0) {
    delete opts.universityId;
  }
  if (degreeId === 0) {
    delete opts.degreeId;
  }
  if (password === "") {
    delete opts.password;
  }
  if (email === "") {
    delete opts.email;
  }
  apiInstance.updateUser(opts, (error, data, response) => {
    if (error) {
      console.error(error);
      callback(false);
    } else {
      callback(true);
    }
  });
}

/**
 * Obtiene el usuario con el id especificado
 * @param {Number} id ID del usuario
 * @param {Function} callback Función a ejecutar tras obtener el usuario
 */
export function getUser(id, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0" // String |
  };
  apiInstance.getUser(id, opts, (error, data, response) => {
    if (error) {
      console.error(error);
    } else {
      callback(data);
    }
  });
}

/**
 * Busca al usuario con nombre username y ejecuta el callback
 * tras obtener dicho usuario.
 * @param {String} username Nombre de usuario del usuario
 * @param {Function} callback Función a ejecutar tras obtener los datos
 */
export function getUserByUsername(username, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0", // String |
    username: username // String | String a buscar en el nombre de usuario
  };
  apiInstance.findUserByUsername(opts, (error, data, response) => {
    if (error) {
      callback(false);
    } else {
      callback(data);
    }
  });
}

/**
 * Obtiene la universidad asociada al usuario
 * @param {Number} id ID del usuario
 * @param {Function} callback Función a ejecutar tras obtener los datos
 */
export function getUniversityOfUser(id, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0" // String |
  };
  apiInstance.getUniversityOfUser(id, opts, (error, data, response) => {
    if (error) {
      console.error(error);
    } else {
      callback(data);
    }
  });
}

/**
 * Obtiene la carrera asociada al usuario
 * @param {Number} id ID del usuario
 * @param {Function} callback Función a ejecutar tras obtener los datos
 */
export function getDegreeOfUser(id, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0" // String |
  };
  apiInstance.getDegreeOfUser(id, opts, (error, data, response) => {
    if (error) {
      console.error(error);
    } else {
      callback(data);
    }
  });
}

/**
 * Obtiene las asignaturas del usuario especificado
 * @param {Number} id ID del usuario
 * @param {Function} callback Función a ejecutar tras obtener las asignaturas
 */
export function getSubjectsOfUser(id, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0", // String |
    projection: "subjectWithUniversity" // String | Incluir si se quiere obtener tambien la universidad en la respuesta
  };
  apiInstance.getSubjectsOfUser(id, opts, (error, data, response) => {
    if (error) {
      console.error(error);
    } else {
      data._embedded.subjects.sort((a, b) => a.name.localeCompare(b.name));
      callback(data._embedded.subjects);
    }
  });
}

/**
 * Obtiene las asignaturas de un profesor, las que está
 * cursando actualmente, junto con la universidad
 * @param {Number} id ID del usuario
 * @param {Function} callback Función a ejecutar tras obtener los datos
 */
export function getSubjectsAsProfessor(id, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0", // String |
    projection: "subjectWithUniversity" // String | Incluir si se quiere obtener tambien la universidad en la respuesta
  };
  apiInstance.getSubjectsAsProfessor(id, opts, (error, data, response) => {
    if (error) {
      console.error(error);
    } else {
      callback(data._embedded.subjects);
    }
  });
}

/**
 * Obtiene los profesores de un usuario
 * @param {Number} page Página a obtener
 * @param {Function} callback Función a ejecutar tras obtener los datos
 */
export function findUserProfessors(page, callback) {
  // Configure Bearer (JWT) access token for authorization: bearerAuth
  let bearerAuth = defaultClient.authentications["bearerAuth"];
  bearerAuth.accessToken = getUserToken();

  let opts = {
    cacheControl: "no-cache, no-store, must-revalidate", // String |
    pragma: "no-cache", // String |
    expires: "0", // String |
    page: page, // Number | Número de la página a devolver
    sort: ["_embedded.users.username"] // [String] | Parámetros en la forma `($propertyname,)+[asc|desc]?`
  };
  apiInstance.findUserProfessors(opts, (error, data, response) => {
    if (error) {
      console.error(error);
    } else {
      callback(data._embedded.users);
    }
  });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a></li><li><a href="BarraNavegacion.html">BarraNavegacion</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addComment">addComment</a></li><li><a href="global.html#addMessage">addMessage</a></li><li><a href="global.html#addProfessor">addProfessor</a></li><li><a href="global.html#addReproductionList">addReproductionList</a></li><li><a href="global.html#addUser">addUser</a></li><li><a href="global.html#addVideotoReproductionList">addVideotoReproductionList</a></li><li><a href="global.html#addVote">addVote</a></li><li><a href="global.html#authUser">authUser</a></li><li><a href="global.html#borrarAsignatura">borrarAsignatura</a></li><li><a href="global.html#borrarProfeAsignatura">borrarProfeAsignatura</a></li><li><a href="global.html#borrarProfesor">borrarProfesor</a></li><li><a href="global.html#borrarUniversidad">borrarUniversidad</a></li><li><a href="global.html#checkFileExtensionImage">checkFileExtensionImage</a></li><li><a href="global.html#checkFileExtensionVideo">checkFileExtensionVideo</a></li><li><a href="global.html#checkNotification">checkNotification</a></li><li><a href="global.html#crearAsigYLigar">crearAsigYLigar</a></li><li><a href="global.html#crearCarreraYLigar">crearCarreraYLigar</a></li><li><a href="global.html#crearUniversidad">crearUniversidad</a></li><li><a href="global.html#deleteProfessor">deleteProfessor</a></li><li><a href="global.html#deleteReproductionList">deleteReproductionList</a></li><li><a href="global.html#deleteVideo">deleteVideo</a></li><li><a href="global.html#deleteVideoFromDisplay">deleteVideoFromDisplay</a></li><li><a href="global.html#deleteVideoFromReproductionList">deleteVideoFromReproductionList</a></li><li><a href="global.html#diasDelMes">diasDelMes</a></li><li><a href="global.html#emailPattern">emailPattern</a></li><li><a href="global.html#esAyer">esAyer</a></li><li><a href="global.html#esBisiesto">esBisiesto</a></li><li><a href="global.html#f_filterResults">f_filterResults</a></li><li><a href="global.html#f_scrollTop">f_scrollTop</a></li><li><a href="global.html#findSubjectByName">findSubjectByName</a></li><li><a href="global.html#findSubjectsContainingName">findSubjectsContainingName</a></li><li><a href="global.html#findUserProfessors">findUserProfessors</a></li><li><a href="global.html#findVideosContainingTitle">findVideosContainingTitle</a></li><li><a href="global.html#generadorColores">generadorColores</a></li><li><a href="global.html#getCommentsByVideo">getCommentsByVideo</a></li><li><a href="global.html#getDegreeOfUser">getDegreeOfUser</a></li><li><a href="global.html#getDegreesFromUnivesity">getDegreesFromUnivesity</a></li><li><a href="global.html#getDisplaysByUser">getDisplaysByUser</a></li><li><a href="global.html#getLastMessages">getLastMessages</a></li><li><a href="global.html#getMessagesFromSender">getMessagesFromSender</a></li><li><a href="global.html#getMessagesToReceiver">getMessagesToReceiver</a></li><li><a href="global.html#getProfessorsFromSubject">getProfessorsFromSubject</a></li><li><a href="global.html#getRecommendations">getRecommendations</a></li><li><a href="global.html#getReproductionListVideoIn">getReproductionListVideoIn</a></li><li><a href="global.html#getScore">getScore</a></li><li><a href="global.html#getSubjectById">getSubjectById</a></li><li><a href="global.html#getSubjectRanking">getSubjectRanking</a></li><li><a href="global.html#getSubjectsAsProfessor">getSubjectsAsProfessor</a></li><li><a href="global.html#getSubjectsFromUniveristy">getSubjectsFromUniveristy</a></li><li><a href="global.html#getSubjectsOfUser">getSubjectsOfUser</a></li><li><a href="global.html#getTime">getTime</a></li><li><a href="global.html#getTimePassed">getTimePassed</a></li><li><a href="global.html#getUniversityOfUser">getUniversityOfUser</a></li><li><a href="global.html#getUnivesities">getUnivesities</a></li><li><a href="global.html#getUser">getUser</a></li><li><a href="global.html#getUserByUsername">getUserByUsername</a></li><li><a href="global.html#getUserID">getUserID</a></li><li><a href="global.html#getUserNotifications">getUserNotifications</a></li><li><a href="global.html#getUserPhoto">getUserPhoto</a></li><li><a href="global.html#getUserReproductionLists">getUserReproductionLists</a></li><li><a href="global.html#getUserRole">getUserRole</a></li><li><a href="global.html#getUserToken">getUserToken</a></li><li><a href="global.html#getUserUncheckedNotifications">getUserUncheckedNotifications</a></li><li><a href="global.html#getVideo">getVideo</a></li><li><a href="global.html#getVideoDisplay">getVideoDisplay</a></li><li><a href="global.html#getVideosFromReproductionList">getVideosFromReproductionList</a></li><li><a href="global.html#getVideosFromSubject">getVideosFromSubject</a></li><li><a href="global.html#getVideosFromUploader">getVideosFromUploader</a></li><li><a href="global.html#getVideoSubject">getVideoSubject</a></li><li><a href="global.html#hacerProfesor">hacerProfesor</a></li><li><a href="global.html#isSignedIn">isSignedIn</a></li><li><a href="global.html#ligarUniAsig">ligarUniAsig</a></li><li><a href="global.html#ligarUniCarr">ligarUniCarr</a></li><li><a href="global.html#mergeSortedArray">mergeSortedArray</a></li><li><a href="global.html#parsearFecha">parsearFecha</a></li><li><a href="global.html#parseNewMessages">parseNewMessages</a></li><li><a href="global.html#putFavouritesFirst">putFavouritesFirst</a></li><li><a href="global.html#RemoveAccents">RemoveAccents</a></li><li><a href="global.html#restriccion">restriccion</a></li><li><a href="global.html#restriccionNombre">restriccionNombre</a></li><li><a href="global.html#restriccionUser">restriccionUser</a></li><li><a href="global.html#scrollFunc">scrollFunc</a></li><li><a href="global.html#setUserPhoto">setUserPhoto</a></li><li><a href="global.html#setUserRole">setUserRole</a></li><li><a href="global.html#signIn">signIn</a></li><li><a href="global.html#signOut">signOut</a></li><li><a href="global.html#SubscribeSubject">SubscribeSubject</a></li><li><a href="global.html#UnsubscribeSubject">UnsubscribeSubject</a></li><li><a href="global.html#updateDisplay">updateDisplay</a></li><li><a href="global.html#updateUser">updateUser</a></li><li><a href="global.html#UploadVideo">UploadVideo</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.2</a> on Tue May 28 2019 16:31:38 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
